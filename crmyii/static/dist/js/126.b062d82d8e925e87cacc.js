webpackJsonp([126],{1030:function(e,t,a){a(2152),a(2153);var n=a(19)(a(1625),a(2395),"data-v-6a8e16d2",null);e.exports=n.exports},1239:function(e,t,a){"use strict";function n(e){return(0,O.fetch)({url:"customerList",method:"get",params:""})}function r(e){return(0,O.fetch)({url:"profitsTrend/12/default?cuid="+e.id,method:"get",params:""})}function i(e){return(0,O.fetch)({url:"profitsTrueTrend/12/default?cuid="+e.id,method:"get",params:""})}function o(e){return(0,O.fetch)({url:"renewRank/"+e.num+"/"+e.data+"default",method:"get",params:""})}function l(e){return(0,O.fetch)({url:"renewTrend/12/default",method:"post",data:e.date})}function d(e){return(0,O.fetch)({url:"market_renew_money_zhexian/"+e.date,method:"get",params:""})}function s(e){return(0,O.fetch)({url:e.data+"/"+e.num+"/"+e.date+"default",method:"get",params:""})}function c(e){return(0,O.fetch)({url:e.data+"/12/default",method:"post",data:e.date})}function u(e){return(0,O.fetch)({url:"mediaProductStatistical/"+e.data,method:"get",params:""})}function p(e){return(0,O.fetch)({url:"mediaRunning/12"+e.prlinid+"year="+e.year,method:"get",params:""})}function f(e){return(0,O.fetch)({url:"contractAddRank/"+e.default+"/"+e.data,method:"get",params:""})}function m(e){return(0,O.fetch)({url:"contractMarketAddList/"+e.default+"/"+e.data,method:"get",params:""})}function h(e){return(0,O.fetch)({url:"marketProfitsRank/"+e.default+"/"+e.data,method:"get",params:""})}function g(e){return(0,O.fetch)({url:"marketProfitsList/"+e.id+"/"+e.data,method:"get",params:""})}function b(e){return(0,O.fetch)({url:"contractAddList/"+e.data,method:"get",params:""})}function _(e){return(0,O.fetch)({url:"semRank/"+e.data,method:"get",params:""})}function k(e){return(0,O.fetch)({url:"semCost/"+e.name+"/"+e.data,method:"get",params:""})}function x(e){return(0,O.fetch)({url:"customer_prlin/"+e.id,method:"get",params:""})}function v(e){return(0,O.fetch)({url:"profitsTrend/12/default?cuid="+e.id+"&prlin="+e.prlin,method:"post",data:e.date})}function w(e){return(0,O.fetch)({url:"market_renew_money_zhexian/"+e.date+"?adid="+e.id+e.data+e.prlin,method:"get",params:""})}function y(e){return(0,O.fetch)({url:"profitsTrueTrend/12/default?cuid="+e.id+"&prlin="+e.prlin,method:"post",data:e.date})}function T(e){return(0,O.fetch)({url:"/product_linlist",method:"get",params:""})}function C(e){return(0,O.fetch)({url:e.data+"/"+e.num+"/"+e.date+"default?prlin="+e.id,method:"get",params:""})}function D(e){return(0,O.fetch)({url:"customer_profits_rank/"+e.data+"order="+e.name,method:"get",params:""})}function Y(e){return(0,O.fetch)({url:"customer_profits_rank/"+e.date+"order="+e.name+e.data,method:"get",params:""})}function M(e){return(0,O.fetch)({url:"lirun_money_zhexian/"+e.date+e.data,method:"get",params:""})}function R(e){return(0,O.fetch)({url:"mediaRunning/12?year="+e.date+"&prlinid="+e.prlinid,method:"get",params:""})}Object.defineProperty(t,"__esModule",{value:!0}),t.customers=n,t.profitsTrend=r,t.profitsTrueTrend=i,t.getRankList=o,t.getMonthline=l,t.market_renew_money_zhexian=d,t.getProfitsRankList=s,t.getProfitsMonthline=c,t.getmedia=u,t.getmedialine=p,t.getcontractAddRank=f,t.contractMarketAddList=m,t.getcontractprofitRank=h,t.marketProfitsList=g,t.getcontractContract=b,t.getSemRank=_,t.semCost=k,t.customer_prlin=x,t.actualRenewals=v,t.market_renew_money_zhexian_xf=w,t.backPayment=y,t.product_linlist=T,t.getProfitsRankListAll=C,t.customer_profits_rank_xf=D,t.customer_profits_rank=Y,t.lirun_money_zhexian=M,t.mediaRunning=R;var O=a(66)},1625:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1239),r=a(1),i=1,o="",l="",d="",s="",c="";t.default={data:function(){return{weekTime:"",radio:1,dialogVisible:!1,firstAllWeek:[],tableDataWeek:[],titleDate:"",date:"",week:"",month:"",handleClose:"",num:1,addFormVisible:!1,pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},pickerOptions1:{disabledDate:function(e){return e.getTime()>=Date.now()}},getRankList:function(e){var t=this;(0,n.getRankList)({data:e,num:"9999"}).then(function(e){for(var a=[],n=[],r=0;r<e.data.length;r++)r<3?a.push(e.data[r]):n.push(e.data[r]);t.firstAllWeek=a,t.tableDataWeek=n}).catch(function(e){t.$message.error("error")})},matnum:function(e){var t="",a=0;if(e){if(Number(e)<0)if(e=(-Number(e)).toString(),-1==e.indexOf(".")){for(var n=e.length-1;n>=0;n--)t=a%3==0&&0!=a?e.charAt(n)+","+t:e.charAt(n)+t,a++;e="-"+t+".00"}else{for(var n=e.indexOf(".")-1;n>=0;n--)t=a%3==0&&0!=a?e.charAt(n)+","+t:e.charAt(n)+t,a++;e="-"+t+(e+"00").substr((e+"00").indexOf("."),3)}else if(e=e.toString(),-1==e.indexOf(".")){for(var n=e.length-1;n>=0;n--)t=a%3==0&&0!=a?e.charAt(n)+","+t:e.charAt(n)+t,a++;e=t+".00"}else{for(var n=e.indexOf(".")-1;n>=0;n--)t=a%3==0&&0!=a?e.charAt(n)+","+t:e.charAt(n)+t,a++;e=t+(e+"00").substr((e+"00").indexOf("."),3)}return e}return"--"}}},created:function(){var e=function(){var e=new Date,t=e.getDay(),a="1234560",n=0-a.indexOf(t),r=new Date;r.setDate(r.getDate()+n);var i=6-a.indexOf(t),o=new Date;return o.setDate(o.getDate()+i),[r,o]};this.firstDay=r().format("YYYY-01-01");var t=r(e()[0]).format("YYYY-MM-DD"),a=r(e()[1]).format("YYYY-MM-DD"),n=r().startOf("month").format("YYYY-MM-DD"),i=r().endOf("month").format("YYYY-MM-DD"),o=t+"/"+a+"/",l=n+"/"+i+"/",d=window.location.href,s=decodeURI(d.substring(d.lastIndexOf("=")+1,d.length)),c=d.substring(d.indexOf("=")+1,d.lastIndexOf("&"));this.titleDate=s,"week"==c?(this.getRankList(o),this.weekTime=o):(this.getRankList(l),this.weekTime=l)},methods:{gone:function(e,t){this.$router.push({path:"customerProfit2",query:{id:e,name:t}})},handleAdd:function(){this.addFormVisible=!0,this.radio=1},getradio:function(e){this.num=e,i=e},dateChange:function(e){o=e,s=e,c=" 消费排名"},ChangeWeek:function(e){var t=Number(e.indexOf("/"))+1,a=e.substring(t),n=r(a).add(6,"days").format("YYYY-MM-DD");l=a+"/"+n,s=l,c=" 周消费排名"},ChangeMonth:function(e){var t=r(e).startOf("month").format("YYYY-MM-DD"),a=r(e).endOf("month").format("YYYY-MM-DD");d=t+"/"+a,s=d,c=" 月消费排名"},sendbtn:function(){1==i?this.getRankList(o):2==i?this.getRankList(l):3==i&&this.getRankList(d),this.weekTime=s,this.titleDate=c,this.addFormVisible=!1}}}},1926:function(e,t,a){t=e.exports=a(965)(),t.push([e.i,".xufei_pm .rankTable .el-input__inner{background:none;border:1px solid #222931!important;color:#fff}.xufei_pm .rankTable .out{text-align:right;font-size:12px;text-decoration:underline;cursor:pointer;color:#fff;padding:0;margin:0}.xufei_pm .rankTable .out button{background-color:#20a0ff;width:60px;height:30px;line-height:30px;padding:0;font-size:12px}.xufei_pm .rankTable .ranking-right{padding-left:20px}.xufei_pm .el-table{border:none}.xufei_pm .rankTable .el-table{background:none;border:none;color:#fff}.xufei_pm .el-table:before,.xufei_pm .rankTable .el-table:after{background:none}.xufei_pm .el-table tr,.xufei_pm .el-table tr:hover{background:#121921;color:#fff}.xufei_pm .el-table__empty-block{background:#121921}.xufei_pm .rankTable .el-table th{background:#121921;text-align:center}.xufei_pm .rankTable .el-table th:first-child{text-align:left}.xufei_pm .el-table__header-wrapper thead div,.xufei_pm .rankTable .el-table__footer-wrapper thead div{background:#121921;color:#fff}.xufei_pm .el-table thead th,.xufei_pm .el-table thead th>.cell{background:#121921!important}.xufei_pm .el-table td,.xufei_pm .el-table th.is-leaf{border:none!important}.xufei_pm .el-table--striped .el-table__body tr td{background:#121921!important}.xufei_pm .rankTable .el-table .sort-caret.ascending{border-bottom:5px solid #fff}.xufei_pm .rankTable .el-table .sort-caret.descending{border-top:5px solid #fff}.xufei_pm .el-table--border th,.xufei_pm .rankTable .el-table--border td{border-right:none}.xufei_pm .rankTable .el-pagination button.disabled{color:#e4e4e4;background-color:#121921;cursor:not-allowed;border:1px solid #222931}.xufei_pm .rankTable .el-pagination__editor{background:#121921;color:#fff;border:1px solid #222931}.xufei_pm .el-table th.is-leaf,.xufei_pm .rankTable .el-table td{border-bottom:1px solid #222931}.xufei_pm .rankTable .el-table tr{background-color:#121921;text-align:center}.xufei_pm .rankTable .el-table tr td:first-child{text-align:left}.xufei_pm .rankTable .el-table tr.el-table__row:hover{background-color:#222931}.xufei_pm .rankTable .el-table--enable-row-hover .el-table__body tr:hover>td{background-color:#222931;background-clip:padding-box}.xufei_pm .rankTable .el-table--striped .el-table__body tr.el-table__row--striped td{background:none;background-clip:padding-box}.xufei_pm .rankTable .el-select-dropdown__list{background:#121921;color:#fff}.xufei_pm .rankTable .el-select-dropdown__item span{color:#fff}.xufei_pm .rankTable .el-select-dropdown.is-multiple .el-select-dropdown__item.selected.hover,.xufei_pm .rankTable .el-select-dropdown__item.selected.hover{background-color:#222931}.xufei_pm .rankTable .el-select-dropdown__item.selected{color:#fff;background-color:#222931}.xufei_pm .rankTable .el-pager li{background:#222931}.xufei_pm .el-pager li,.xufei_pm .rankTable.el-autocomplete-suggestion__wrap{border:1px solid #121921}.xufei_pm .el-pagination .btn-prev,.xufei_pm .rankTable .el-pagination .btn-next{background:#222931;border:1px solid #121921}.xufei_pm .rankTable .el-pager li:last-child{border-right:none}.xufei_pm .rankTable .el-pager li.active{background:#121921;border:1px solid #222931}.xufei_pm .el-dialog--small{width:900px;height:450px;margin:6% auto}.xufei_pm .data-input{display:inline-block}.xufei_pm .tanBox{width:100%;padding:50px 0 0 140px}.xufei_pm .radioBox-b{margin:35px 0}.xufei_pm .content_all{margin:45px 0 0}.xufei_pm .el-button--primary{color:#fff;background-color:#fb9678;border-radius:5px;border:none;width:140px;height:40px;font-size:18px;outline:none;margin-right:20px}.xufei_pm .leba{font-size:14px;padding-left:5px;margin:0 30px 0 7px}.xufei_pm .el-button--default{width:140px;height:40px;border-radius:5px;border:1px solid #000;color:#000;outline:none}.xufei_pm .el-radio__input.is-checked .el-radio__inner{border-color:#fb9678;background:#fb9678}.xufei_pm .el-date-editor--daterange.el-input,.xufei_pm .el-date-editor.el-input{width:220px;height:40px}",""])},1927:function(e,t,a){t=e.exports=a(965)(),t.push([e.i,".icon[data-v-6a8e16d2]{width:30px;height:22px;vertical-align:-.15em;fill:currentColor;overflow:hidden}.header-nav[data-v-6a8e16d2]{width:100%;height:60px;background:#181f29;padding:0 45px}.header-nav p[data-v-6a8e16d2]:first-child{float:left;color:#fff}.header-nav p[data-v-6a8e16d2]:last-child{float:right;color:#fff}.ranking-table[data-v-6a8e16d2]{width:100%;padding:30px 30px 0;background:#121921}.ranking-table .ranking-left .raking-box[data-v-6a8e16d2]{width:100%;height:160px;margin-bottom:27px;border:1px solid #222931;position:relative}.ranking-table .ranking-left p[data-v-6a8e16d2]{color:#fff;font-size:16px;margin:0;padding-left:20%}.ranking-table .ranking-left p[data-v-6a8e16d2]:first-child{margin-top:15px}.ranking-table .ranking-left p[data-v-6a8e16d2]:nth-child(2){font-size:24px;margin:25px 0}.ranking-table .ranking-left p[data-v-6a8e16d2]:last-child{color:#62656a}.left-img[data-v-6a8e16d2]{position:relative;height:100%}.left-img img[data-v-6a8e16d2]{width:60px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto}@media screen and (max-width:1580px){.el-col-14[data-v-6a8e16d2]{width:100%}.ranking-table .ranking-left p[data-v-5b954c6f][data-v-6a8e16d2]:nth-child(2){font-size:20px;margin:25px 0}.left-img img[data-v-6a8e16d2]{width:40px}.left-img[data-v-6a8e16d2]{position:absolute;height:100%;top:-78px;left:-20%}}@media screen and (max-width:1380px){.ranking-table .ranking-left p[data-v-5b954c6f][data-v-6a8e16d2]:nth-child(2){font-size:18px;margin:25px 0}.ranking-table .ranking-left .raking-box[data-v-5b954c6f][data-v-6a8e16d2]{position:relative}}",""])},2152:function(e,t,a){var n=a(1926);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(966)("24da75b8",n,!0)},2153:function(e,t,a){var n=a(1927);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(966)("2a5bb074",n,!0)},2395:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container xufei_pm"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple header-nav"},[a("p",[a("svg",{staticClass:"icon",staticStyle:{width:"18px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-gengxinpaiming"}})]),e._v("\n\n                    "+e._s(e.titleDate)+"排名\n                ")]),e._v(" "),a("p",[a("a",{on:{click:e.handleAdd}},[a("span",[e._v("\n                       "+e._s(e.weekTime)+"\n                    ")]),e._v(" "),a("svg",{staticClass:"icon",staticStyle:{width:"18px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-iconfontcolor37"}})])])])])])],1),e._v(" "),a("div",{staticClass:"ranking-table rankTable"},[a("el-row",[a("el-col",{staticClass:"ranking-left",attrs:{span:5}},e._l(e.firstAllWeek,function(t,n){return a("div",{staticClass:"raking-box",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.gone(t.advertiser,t.adname)}}},[a("el-col",{attrs:{span:14}},[a("p",{staticClass:"raking-name"},[a("a",{attrs:{title:t.adname}},[e._v("\n                                "+e._s(t.adname)+"\n                            ")])]),e._v(" "),a("p",{staticClass:"raking-num"},[e._v(e._s(e.matnum(t.money)))]),e._v(" "),a("p",[e._v("消费")])]),e._v(" "),a("el-col",{staticClass:"left-img",attrs:{span:10}},[0==n?a("el-col",{staticClass:"card-list",attrs:{span:10}},[a("img",{attrs:{src:"http://test.myushan.com/ZPCRM1.png",alt:""}})]):e._e(),e._v(" "),1==n?a("el-col",{staticClass:"card-list",attrs:{span:10}},[a("img",{attrs:{src:"http://test.myushan.com/ZPCRM2.png",alt:""}})]):e._e(),e._v(" "),2==n?a("el-col",{staticClass:"card-list",attrs:{span:10}},[a("img",{attrs:{src:"http://test.myushan.com/ZPCRM3.png",alt:""}})]):e._e()],1)],1)}),0),e._v(" "),a("el-col",{staticClass:"ranking-right",attrs:{span:19}},[a("data-tables",{staticStyle:{width:"100%"},attrs:{"has-action-col":!1,data:e.tableDataWeek,"default-sort":{prop:"money",order:"descending"},"pagination-def":{pageSize:15,pageSizes:[15,25,40]}}},[a("el-table-column",{attrs:{sortable:"",label:e.$t("titles.customer")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.gone(t.row.advertiser,t.row.adname)}}},[e._v(e._s(t.row.adname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",label:e.titleDate},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.gone(t.row.advertiser,t.row.adname)}}},[e._v(e._s(e.matnum(t.row.money)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",label:"排名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.gone(t.row.advertiser,t.row.adname)}}},[e._v(e._s(t.row.rank))])]}}])})],1),e._v(".\n            ")],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"tan_box",attrs:{visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t},close:function(t){e.addFormVisible=!1}}},[a("el-radio-group",{on:{change:function(t){return e.getradio(t)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("div",{staticClass:"tanBox"},[a("div",{staticClass:"radioBox radioBox-a"},[a("el-radio",{attrs:{label:1}},[1==e.num?a("span",{staticClass:"leba",staticStyle:{color:"#fda58d"}},[e._v("自定义时间")]):e._e(),e._v(" "),1!=e.num?a("span",{staticClass:"leba",staticStyle:{color:"#e1e1e1"}},[e._v("自定义时间")]):e._e()]),e._v(" "),a("div",{staticClass:"data-input "},[1==e.num?a("el-date-picker",{staticClass:"pick",attrs:{type:"daterange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"/",format:"yyyy-MM-dd","picker-options":e.pickerOptions0},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e(),e._v(" "),1!=e.num?a("el-date-picker",{attrs:{align:"right",disabled:!0,placeholder:"选择日期范围"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"radioBox radioBox-b"},[a("el-radio",{attrs:{label:2}},[2==e.num?a("span",{staticClass:"leba",staticStyle:{color:"#fda58d"}},[e._v("周消耗      ")]):e._e(),e._v(" "),2!=e.num?a("span",{staticClass:"leba",staticStyle:{color:"#e1e1e1"}},[e._v("周消耗      ")]):e._e()]),e._v(" "),2==e.num?a("el-date-picker",{staticClass:"selWeek",attrs:{type:"week",format:"yyyy 第 WW 周/yyyy-MM-dd","picker-options":e.pickerOptions0,placeholder:"选择周"},on:{change:e.ChangeWeek},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}}):e._e(),e._v(" "),2!=e.num?a("el-date-picker",{attrs:{align:"right",disabled:!0,placeholder:"选择周"},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}}):e._e()],1),e._v(" "),a("div",{staticClass:"radioBox radioBox-c"},[a("el-radio",{attrs:{label:3}},[3==e.num?a("span",{staticClass:"leba",staticStyle:{color:"#fda58d"}},[e._v("月消耗      ")]):e._e(),e._v(" "),3!=e.num?a("span",{staticClass:"leba",staticStyle:{color:"#e1e1e1"}},[e._v("月消耗      ")]):e._e()]),e._v(" "),3==e.num?a("el-date-picker",{staticClass:"selMonth",attrs:{type:"month","picker-options":e.pickerOptions1,placeholder:"选择月"},on:{change:e.ChangeMonth},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}}):e._e(),e._v(" "),3!=e.num?a("el-date-picker",{attrs:{align:"right",disabled:!0,placeholder:"选择月"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e()],1),e._v(" "),a("div",{staticClass:"content_all content_btn"},[a("el-button",{attrs:{type:"primary","native-type":"submit"},nativeOn:{click:function(t){return e.sendbtn(t)}}},[e._v("提交")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")])],1)])])],1)],1)},staticRenderFns:[]}}});